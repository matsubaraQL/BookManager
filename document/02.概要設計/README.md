# 成果物：社内書籍管理システム(方式設計)
====

## ユーザ
+ 画面を介してApiを実行する。

## 画面
+ 作成対象から外すとするも、WebApiとのIFは必ず定義する。

## Api
+ Java(jdk10)にて実装する。
+ アプリケーション・サーバーはSpringBootの内蔵Tomcatを使用するとする。
+ 同時アクセスは最大４人を想定するとする。(社内で使用するので)
+ "RESTful API"の考え方を踏襲するとする。
+ 入力値については検証対象とする。

## Rdb
+ Postgres10にて管理する。
+ "database"には当システム以外からは呼ばれない。
+ プログラムから呼び出す際は「program」(仮)ユーザーからアクセスする。
+ リリース用とテスト用を用意する。ただし開発用はdockerコンテナを利用する。
+ 具体的なテーブル内容については開発時に決める。
+ データベース・アクセスはJavaの部品にて実現する。
+ ドメイン機能を使用する。
+ シーケンスを使用する。
+ 排他方法については"更新回数"を使用する。

## シーケンス図

下記は [Mermaid](https://mermaidjs.github.io/) を使用しています。  
GoogleChromのアプリにて描画しているものをスクショしています。  
Macでのスクショ方法は「shift + command + 4」です。  

### クライアント<->サーバー

![overview image](./image/01.png?raw=true)

```mermaid
sequenceDiagram
	ユーザ->>画面: 入力  
	画面-->>Api: リクエスト送信  
	Api->>Api: 各種処理
	    loop CRUD
            Api-->>Rdb: 
            Rdb-->>Api: 
	    end
	Api->>Api: 各種処理
	Api-->>画面: レスポンス送信  
	画面->>ユーザ: 描画
```

### 画面遷移図

![overview image](./image/02.png?raw=true)

```mermaid
graph TD
	A[メニューリンク] -.-> B(書籍一覧画面)
	B -->|書籍一覧取得| B
	B -->|書籍1件取得| C(書籍詳細画面)
	C --> D(書籍編集画面)
	D --> E(書籍編集確認画面)
	E -->|書籍更新| F(書籍編集完了画面)
	E -->|書籍削除| F
	F --> B
	A -.-> H(書籍登録申請画面)
	H --> I(書籍登録申請確認画面)
	I -->|書籍登録申請| J(書籍登録申請完了画面)
	A -.-> M(書籍申請一覧画面)
	M -->|申請一覧取得| M
	M --> N(書籍申請確認画面)
	N -->|書籍申請承認| O(申請許可完了画面)
	N -->|書籍申請拒否| O
	O --> M
	A -.-> R(書籍貸出機能-仮)
```

